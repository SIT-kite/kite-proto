syntax = "proto3";
package kite.board;

import "google/protobuf/timestamp.proto";
import "kite-proto/template.proto";
import "kite-proto/token.proto";


// â€œé£ç­ğŸªæ—¶åˆ»â€ å›¾ç‰‡ä¿¡æ¯
message Picture {
  // å›¾ç‰‡ UUID
  template.UUID uuid = 1;
  // ä¸Šä¼ è€… UID
  int32 uid = 2;
  // ä¸Šä¼ è€…æè¿°ï¼Œ æ˜µç§°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æˆ–è‡ªåŠ¨ç”Ÿæˆçš„æè¿°
  string publisher = 3;
  // åŸå§‹å›¾ç‰‡ URL
  string origin_url = 4;
  // ç¼©ç•¥å›¾ URL
  string thumbnail = 5;
  // ä¸Šä¼ çš„æ—¶é—´æˆ³
  google.protobuf.Timestamp ts = 6;
}

// å›¾ç‰‡åˆ—è¡¨
message PictureListResponse {
  repeated Picture picture_list = 1;
}

// TODO: ä½¿ç”¨ä¸ƒç‰›äº‘ SDK
// è¯·æ±‚ä¸Šä¼ å›¾ç‰‡
message UploadRequest {
  // ç”¨æˆ·è®¿é—®ä»¤ç‰Œ
  token.UserToken token = 1;
  // å›¾ç‰‡æ•°æ®
  bytes payload = 2;
}

service Board {
  // è·å–å…¬å…±å›¾ç‰‡åˆ—è¡¨
  rpc GetPictureListResponse(template.PageOption) returns (PictureListResponse);
  // è·å–ç”¨æˆ·è‡ªå·±ä¸Šä¼ åˆ—è¡¨
  rpc GetMyUpload(template.EmptyRequestWithToken) returns (PictureListResponse);
  // ä¸Šä¼ å›¾ç‰‡
  rpc Upload(UploadRequest) returns (Picture);
}